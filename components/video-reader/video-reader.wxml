<view class="video-player">
  <video 
    id="reader-video"
    src="{{videoUrl}}"
    bindready="onVideoReady"
    bindloadedmetadata="onVideoLoad"
    binderror="onVideoError"
    show-center-play-btn="{{true}}"
    controls="{{true}}"
    autoplay="{{true}}"
    object-fit="contain"
    bindfullscreenchange="onFullScreenChange"
    bindplay="onVideoPlay"
    bindpause="onVideoPause"
    bindended="onVideoEnd"
    class="video">
  </video>
  <view class="chapter-title" wx:if="{{!isFullScreen}}">{{chapter.title || '未知标题'}}</view>
  
  <!-- 加载状态 -->
  <view class="video-loading" wx:if="{{isLoading}}">
    <view class="loading-spinner"></view>
    <view class="loading-text">视频加载中...</view>
  </view>
  
  <!-- 错误状态 -->
  <view class="video-error" wx:if="{{hasError}}">
    <view class="error-icon">!</view>
    <view class="error-text">{{errorMsg}}</view>
    <view class="retry-btn" bindtap="retryVideo">重试</view>
  </view>
  
  <!-- 自定义控制器 -->
  <view class="video-controls" wx:if="{{!isFullScreen}}">
    <view class="control-btn prev" bindtap="prevVideo">
      <image src="/images/icons/prev.png"></image>
    </view>
    <view class="control-btn play" bindtap="togglePlay">
      <image src="{{isPlaying ? '/images/icons/pause.png' : '/images/icons/play.png'}}"></image>
    </view>
    <view class="control-btn next" bindtap="nextVideo">
      <image src="/images/icons/next.png"></image>
    </view>
  </view>
  
  <!-- 添加调试信息 -->
  <view class="debug-info" wx:if="{{false}}">
    <view>视频URL: {{videoUrl || '无'}}</view>
    <view>加载状态: {{isLoading ? '加载中' : '已加载'}}</view>
    <view>错误状态: {{hasError ? '有错误' : '无错误'}}</view>
    <view>播放状态: {{isPlaying ? '播放中' : '已暂停'}}</view>
  </view>
</view> 